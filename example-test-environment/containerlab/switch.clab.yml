# topology documentation: http://containerlab.dev/lab-examples/ext-bridge/
name: switch

topology:
  nodes:
    source:
      kind: linux
      image: ubuntu:latest
      entrypoint: sh -c 'apt-get update && apt-get install -y iproute2 iputils-ping && ip addr add 2.2.2.1/24 dev eth1 && tail -f /dev/null'
    switch:
      kind: linux
      image: ubuntu:latest
        entrypoint: sh -c 'apt-get update && apt-get install -y iproute2 iputils-ping && ip addr add 2.2.2.2/24 dev eth1 && ip addr add 2.2.2.3/24 dev eth1 && tail -f /dev/null'
    destination:
      kind: linux
      image: ubuntu:latest
      entrypoint: sh -c 'apt-get update && apt-get install -y iproute2 iputils-ping && ip addr add 2.2.2.4/24 dev eth1 && tail -f /dev/null'

  links:
    - endpoints: ["source:eth1", "switch:eth1"]
    - endpoints: ["switch:eth2", "destination:eth1"]
